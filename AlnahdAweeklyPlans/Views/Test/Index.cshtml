@model AlnahdAweeklyPlans.Models.MultiSelect
@{
    Layout = null;
}
<!-- CSS -->
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<link href="~/Content/chosen.css" rel="stylesheet" />
<script src="~/Scripts/jquery-3.0.0.js"></script>
<script src="~/Scripts/chosen.jquery.js"></script>
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        @Html.DropDownListFor(x=>x.Ids,Model.List.Select(x=> new SelectListItem() { Text = x.Text, Value = x.Value }), new {@class= "form-control chosen-select",@multiple=true })
    </div>
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="button-group">
                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown"><span class="caret"></span>Select</button>
                    <ul class="dropdown-menu">
                        @for (int i = 0; i < 6; i++)
                        {
                            <li><a href="#" class="small" data-value="@i" tabIndex="-1"><input type="checkbox" />&nbsp;Option @i</a></li>
                        }
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <script src="~/Scripts/bootstrap.js"></script>
    <script type="text/javascript">
        $(".chosen-select").chosen();
        var options = [];

        $('.dropdown-menu a').on('click', function (event) {

            var $target = $(event.currentTarget),
                val = $target.attr('data-value'),
                $inp = $target.find('input'),
                idx;

            if ((idx = options.indexOf(val)) > -1) {
                options.splice(idx, 1);
                setTimeout(function () { $inp.prop('checked', false) }, 0);
            } else {
                options.push(val);
                setTimeout(function () { $inp.prop('checked', true) }, 0);
            }

            $(event.target).blur();

            console.log(options);
            return false;
        });
    </script>
</body>
</html>
